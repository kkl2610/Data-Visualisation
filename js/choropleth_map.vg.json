{
   "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
   "title": "Trade Balance of Beauty Products 2020 (thousand USD)",
   "width": 800,
   "height": 600,
   "projection": {"type": "mercator"},
   "data": {
   "url": "https://raw.githubusercontent.com/kkl2610/Data-Visualisation/master/week9/js/world.topo.json", "format": {"type": "topojson", "feature": "world.geo"}
   },
   "layer": [
      {
   "transform": [
        {"calculate": "'Data is not available in ' + datum.properties.name_long", "as": "note"}
      ],
      "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "grey"},
      "encoding": {
        "tooltip": {
          "field": "note"
        }
      }  
  },
   {"transform": [
      {
      "lookup": "properties.name_long",
      "from": {
      "data": {
      "url": "https://raw.githubusercontent.com/kkl2610/Data-Visualisation/master/data/Trade_Balance.csv"
      },
      "key": "Countries",
      "fields": ["Balance2020"]
   }
   }
   ],
   "mark": {"type": "geoshape", "stroke": "grey"},
   "encoding": {
      "color": {
      "field": "Balance2020",
      "type": "quantitative",
      "scale": {
      "type": "threshold",
      "domain": [-1000000, -500000, 0, 500000, 1000000],
      "range": ["#b2182b", "#ef8a62", "#fddbc7", "#d1e5f0", "#67a9cf", "#2166ac"]
      }
      },
      "tooltip": [
      {"field": "properties.name_long", "type": "nominal", "title": "Countries"},
      {"field": "Balance2020", "type": "quantitative", "format": ".2f", "title": "Trade Balance"}
      ]
   }
  }
  
   ]
  }
